<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>--><!--
    <script src="https://www.jq22.com/jquery/jquery-2.1.1.js"></script>-->
    <script src="js/jquery.js"></script>
</head>
<style>
    .qjj .qjj_r .xyk .z_jyk ul li .z_jyk_t {
        width: 125px;
    }
    .fl {
        float: left;
    }
</style>
<body>
<div class="container">
    <h2>找老师</h2>
    <div class="qjj_r_t" style="border: 1px solid #ccc">
        <a href="/index.html">网站首页 >></a>
        <a href="">找老师</a>
    </div>
    <a href="/"><img style="width: 650px" src="http://img.zhishanshi.com/web/image/201906/1560159796261.jpg" alt="Logo"></a>
    <div>
        <table class="tb" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <th>华南理工大学广州学院知善师家教</th>
            </tr>
        </table>

        <select id="t_sex">
            <option value =""></option>
            <option value ="男">男</option>
            <option value ="女">女</option>
        </select>
        <select id="t_school">
            <option value =""></option>
            <option value ="华师">华师</option>
            <option value ="清华">清华</option>
            <option value ="华工">华工</option>
            <option value ="其他">其他</option>
        </select>
        <select id="t_workaddress">
            <option value =""></option>
            <option value ="广州">广州</option>
            <option value ="深圳">深圳</option>
            <option value ="上海">上海</option>
            <option value ="其他">其他</option>
    </select>
        <button id="search" value="搜索" onclick="">搜索</button>
        <br><br>


        <div id="d_body" class=".z_jyk">
        </div>

        <div class="page">
            <button id="firstPage">首页</button>&#160;&#160;&#160;
            <button id="previous">上一页</button>&#160;&#160;&#160;
            第<input type="text" id="index" value="1"  size="1" >页&#160;&#160;&#160;
            <button id="next">下一页</button>&#160;&#160;&#160;
            <button id="last">尾页</button>
            <div id="pageCount" style="display: inline-block"></div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
    var pageSize = 2;//每页行数
    var pageIndex = 1;//当前页
    var totalCount = 4;//总记录数
    var totalPageCount =totalCount/pageSize;//总页数
    var data={
        "pageIndex":pageIndex,
        "pageSize":pageSize
        //var id = $("select").attr("id");
    }
    //jquery代码随着document加载完毕而加载
    $(document).ready(function () {
        //分页查询
        $.ajax({
            url: '1.json',
            type: 'post',
            data: JSON.stringify(data),
            dataType: 'json',
            contentType: "application/json;charset=UTF-8",
            /* data: "pageIndex=" + pageIndex + "&PageSize=" + pageSize,*/
            success: function callbackFun(data) {

                fillTable(data);
            }
        });
//查询
    $("#search").click(function () {
        var t_sex = $("#t_sex").val();
        var t_school = $("#t_school").val();
        var t_workaddress = $("#t_workaddress").val();
        //var sql="select * from t_teacher where t_sex="+t_sex+"AND t_school="+t_school+" AND t_workaddress="+t_workaddress;
        var select="WHERE t_sex="+t_sex+",t_school="+t_school+" AND t_workaddress="+t_workaddress;
        alert(select);
        $.ajax({
            type: "post",
            url: "1.json",
            data: select,//上传搜索
            dataType: "json", //返回数据类型
            contentType: 'application/json',
            success: function (data) {
                if ( data=="success") {
                    var trs = "";//不初始化字符串"",会默认"undefined"
                    var div="";
                    console.log(data[0].t_account);
                    console.log(data[0])
                    alert(data.msg);
                    for (var i = 0; i < pageSize; i++) {
                        var kemu1 = "";
                        for (var j = 0; j < data[i].teacherHope.length;j++) {
                            var kemu = "";
                            kemu = data[i].teacherHope[j].t_kemu;
                            kemu1 += kemu + " ";
                        }
                        var tr =
                            '<li>'
                            + '<div class="z_jyk_t fl">'
                            + ' <img src="http://zhishanshi.com/static/pc/images/Demo_Big.jpg" alt="">'
                            + '</div>'
                            + '<div>' +
                            '<p>姓名：<i>' + data[i].t_name + '</i></p>' +
                            '<p>账号：<i>' + data[i].t_account + '</i></p>' +
                            '<p>就读/毕业高校：<i>' + data[i].t_workaddress + '</i></p>' +
                            '<p>科目：<i>' + kemu1 + '</i></p>' +
                            '<p>性别：<i>' + data[i].t_sex + '</i></p>' +
                            '<p>年龄：<i>' + data[i].t_age + '</i></p>' +
                            "<td><a href='login.html'>" + "查看详情" + "</a></td>" +
                            '</div>'
                            + "</li><br><br>";
                        trs += tr;
                        $("#d_body").html(trs);
                    }
                }
            }

        });

})


    });
    //填充数据
    function fillTable(data) {
        var i = 0;
        var trs = "";//不初始化字符串"",会默认"undefined"
        var div="";
        console.log(data[0].t_account);
        console.log(data[0])
        alert(data.msg);
        for (var i = 0; i < pageSize; i++) {
            var kemu1 = "";
            for (var j = 0; j < data[i].teacherHope.length;j++) {
                var kemu = "";
                kemu = data[i].teacherHope[j].t_kemu;
                kemu1 += kemu + " ";
            }
            var tr =
                '<li>'
                + '<div class="z_jyk_t fl">'
                + ' <img src="http://zhishanshi.com/static/pc/images/Demo_Big.jpg" alt="">'
                + '</div>'
                + '<div>' +
                '<p>姓名：<i>' + data[i].t_name + '</i></p>' +
                '<p>账号：<i>' + data[i].t_account + '</i></p>' +
                '<p>就读/毕业高校：<i>' + data[i].t_workaddress + '</i></p>' +
                '<p>科目：<i>' + kemu1 + '</i></p>' +
                '<p>性别：<i>' + data[i].t_sex + '</i></p>' +
                '<p>年龄：<i>' + data[i].t_age + '</i></p>' +
                "<td><a href='login.html'>" + "查看详情" + "</a></td>" +
                '</div>'
                + "</li><br><br>";
            trs += tr;
            $("#d_body").html(trs);
        }
        totalPageCount = (totalCount % pageSize == 0) ? (totalCount / pageSize) : (totalCount / pageSize + 1);

        //上一页
        $("#previous").click(function () {
            if (pageIndex > 1) {
                pageIndex--;
            }
            $("#index").val(pageIndex);
            var trs = "";
            for (var i=pageIndex*pageSize-pageSize;i<pageIndex*pageSize;i++) {
                var kemu1 = "";
                for (var j = 0; j < data[i].teacherHope.length;j++) {
                    var kemu = "";
                    kemu = data[i].teacherHope[j].t_kemu;
                    kemu1 += kemu + " ";
                }
                var tr =
                    '<li>'
                    + '<div class="z_jyk_t fl">'
                    + ' <img src="http://zhishanshi.com/static/pc/images/Demo_Big.jpg" alt="">'
                    + '</div>'
                    + '<div>' +
                    '<p>姓名：<i>' + data[i].t_name + '</i></p>' +
                    '<p>账号：<i>' + data[i].t_account + '</i></p>' +
                    '<p>就读/毕业高校：<i>' + data[i].t_workaddress + '</i></p>' +
                    '<p>科目：<i>' + kemu1 + '</i></p>' +
                    '<p>性别：<i>' + data[i].t_sex + '</i></p>' +
                    '<p>年龄：<i>' + data[i].t_age + '</i></p>' +
                    "<td><a href='login.html'>" + "查看详情" + "</a></td>" +
                    '</div>'
                    + "</li><br><br>";
                trs += tr;
                $("#d_body").html(trs);
            }

        });

        //下一页
        $("#next").click(function () {
            if (pageIndex < totalPageCount) {
                pageIndex++;
            }
            $("#index").val(pageIndex);
            var trs = "";
            for (var i= pageIndex*pageSize-pageSize;i<pageIndex*pageSize;i++) {
                var kemu1 = "";
                for (var j = 0; j < data[i].teacherHope.length;j++) {
                    var kemu = "";
                    kemu = data[i].teacherHope[j].t_kemu;
                    kemu1 += kemu + " ";
                }
            var tr =
                    '<li>'
                    + '<div class="z_jyk_t fl">'
                    + ' <img src="http://zhishanshi.com/static/pc/images/Demo_Big.jpg" alt="">'
                    + '</div>'
                    + '<div>' +
                    '<p>姓名：<i>' + data[i].t_name + '</i></p>' +
                    '<p>账号：<i>' + data[i].t_account + '</i></p>' +
                    '<p>就读/毕业高校：<i>' + data[i].t_workaddress + '</i></p>' +
                    '<p>科目：<i>' + kemu1 + '</i></p>' +
                    '<p>性别：<i>' + data[i].t_sex + '</i></p>' +
                    '<p>年龄：<i>' + data[i].t_age + '</i></p>' +
                    "<td><a href='login.html'>" + "查看详情" + "</a></td>" +
                    '</div>'
                    + "</li><br><br>";
                trs += tr;
                $("#d_body").html(trs);
            }
        });

        //首页
        $("#firstPage").click(function () {
            pageIndex = "1";
            $("#index").val(pageIndex);
            var trs = "";
            for (var i=0;i<pageSize;i++) {
                var kemu1 = "";
                for (var j = 0; j < data[i].teacherHope.length;j++) {
                    var kemu = "";
                    kemu = data[i].teacherHope[j].t_kemu;
                    kemu1 += kemu + " ";
                }
                var tr =
                    '<li>'
                    + '<div class="z_jyk_t fl">'
                    + ' <img src="http://zhishanshi.com/static/pc/images/Demo_Big.jpg" alt="">'
                    + '</div>'
                    + '<div>' +
                    '<p>姓名：<i>' + data[i].t_name + '</i></p>' +
                    '<p>账号：<i>' + data[i].t_account + '</i></p>' +
                    '<p>就读/毕业高校：<i>' + data[i].t_workaddress + '</i></p>' +
                    '<p>科目：<i>' + kemu1 + '</i></p>' +
                    '<p>性别：<i>' + data[i].t_sex + '</i></p>' +
                    '<p>年龄：<i>' + data[i].t_age + '</i></p>' +
                    "<td><a href='login.html'>" + "查看详情" + "</a></td>" +
                    '</div>'
                    + "</li><br><br>";
                trs += tr;
                $("#d_body").html(trs);
            }
        });



    //尾页
    $("#last").click(function () {
        pageIndex = totalPageCount;
        $("#index").val(pageIndex);
        var trs = "";
        for (var i=pageIndex*pageSize-pageSize;i<pageIndex*pageSize;i++) {
            var kemu1 = "";
            for (var j = 0; j < data[i].teacherHope.length;j++) {
                var kemu = "";
                kemu = data[i].teacherHope[j].t_kemu;
                kemu1 += kemu + " ";
            }
            var tr =
                '<li>'
                + '<div class="z_jyk_t fl">'
                + ' <img src="http://zhishanshi.com/static/pc/images/Demo_Big.jpg" alt="">'
                + '</div>'
                + '<div>' +
                '<p>姓名：<i>' + data[i].t_name + '</i></p>' +
                '<p>账号：<i>' + data[i].t_account + '</i></p>' +
                '<p>就读/毕业高校：<i>' + data[i].t_workaddress + '</i></p>' +
                '<p>科目：<i>' + kemu1 + '</i></p>' +
                '<p>性别：<i>' + data[i].t_sex + '</i></p>' +
                '<p>年龄：<i>' + data[i].t_age + '</i></p>' +
                "<td><a href='login.html'>" + "查看详情" + "</a></td>" +
                '</div>'
                + "</li><br><br>";
            trs += tr;
            $("#d_body").html(trs);
        }
    });

    };

</script>
<style>
    *{margin: 0;padding: 0}
    .container{width: 90%;border: 1px solid #999;margin: 0px auto;margin: 80px}
    .container>div{float: left}
    .container:after{content: '';display: block;clear: both}
    .left{width: 24%;border: 1px solid #f40000}
    .right{width: 70%;border: 1px solid rgba(255,255,255,.5)}
    .tb{width: 1050px}
    .tb th{background-color: #108ee9;color: #fff}
    .tb tr{height: 40px;line-height: 40px;text-align: center}
    .tb tr:hover{background: #9af5ff
    }
    h2{text-align: center}
    img{width: 130px;
        height: 175px;}
    .page{margin-left: 35%;margin-top: 10px;background-color: #f0f0f0;width: 297px;}
    #index{text-align: center;border: none;font-weight: bold}


    /* www.divcss5.com CSS下拉菜单实例 */


    #nav{line-height: 24px;  list-style-type: none; background:#666}

    #nav a{display: block; width: 80px; text-align:center}

    #nav a:link {color:#666; text-decoration:none}
    #nav a:visited {color:#666;text-decoration:none}
    #nav a:hover {color:#FFF;text-decoration:none;font-weight:bold}

    #nav li{float: left; width: 80px; background:#CCC}
    #nav li a:hover{ background:#999}
    #nav li ul{line-height: 27px;  list-style-type: none;text-align:left;left: -999em; width: 180px; position: absolute}
    #nav li ul li{float: left; width: 180px;background:#EFEFEF}

    #nav li ul a{display: block; width: 156px;text-align:left;padding-left:24px; overflow:hidden}

    #nav li ul a:link {color:#666; text-decoration:none}
    #nav li ul a:visited {color:#666;text-decoration:none}
    #nav li ul a:hover {color:#F3F3F3;text-decoration:none;font-weight:normal;background:#C00}

    #nav li:hover ul{left: auto}
    #nav li.sfhover ul{left: auto}
    #content{clear: left}
</style>
</html>