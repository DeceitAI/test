<!DOCTYPE html>
<html lang="zxx">

<head>
  <title>家教系统修改个人信息</title>
  <!-- Meta-Tags -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  <meta name="keywords" content=""/>
  <script src="https://www.jq22.com/jquery/jquery-2.1.1.js"></script>

  <script>
    addEventListener("load", function () {
      setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
      window.scrollTo(0, 1);
    }
  </script>
  <!-- //Meta-Tags -->
  <!-- Stylesheets -->
  <link href="css/style.css" rel='stylesheet' type='text/css' />
  <!--// Stylesheets -->
  <!--fonts-->
  <!-- title -->
	<link href="http://fonts.googleapis.com/css?family=Abhaya+Libre:400,500,600,700,800" rel="stylesheet">
  <!-- body -->
  <!--//fonts-->
</head>

<script type="text/javascript">

  //渲染
  $(document).ready(function() {

    $.ajax({
      type: "get",
      url: "student/findBys_account",
      dataType: "json", //返回数据类型
      contentType: 'application/json',
      success: function (data) {
        $("#s_name").val(data.s_name);
        $("#s_age").val(data.s_age);
        $("#s_sex").val(data.s_sex);
        $("#s_phone").val(data.s_phone);
        $("#s_school").val(data.s_school);
        $("#s_class").val(data.s_class);
        $("#s_address").val(data.s_address);
        $("#s_password").val(data.s_password);
      }

    });
  })
</script>

<script type="text/javascript">

  //修改用户信息
  function Finish() {
    var s_name = $("#s_name").val();
    var s_age = $("#s_age").val();
    var s_sex = $("#s_sex").val();
    var s_phone = $("#s_phone").val();
    var s_school = $("#s_school").val();
    var s_class = $("#s_class").val();
    var s_address = $("#s_address").val();
    var s_password = $("#s_password").val();
    var data = {
      "s_name":s_name,
      "s_age":s_age,
      "s_sex":s_sex,
      "s_phone":s_phone,
      "s_school":s_school,
      "s_class":s_class,
      "s_address":s_address,
      "s_password":s_password
    }
    $.ajax({
      type: "post",
      url: "student/update",
      data: JSON.stringify(data),
      dataType: "json", //返回数据类型
      contentType: 'application/json',
      success: function (data) {
        if("success" == data.type){
          window.location.href="Personal.html";
        }
        else {
          alert(data.msg);
        }
      },
      error:function () {
        alert("修改不成功")
      }

    });
  }
</script>

<body>
  <header>
    <h1>个人中心</h1>
  </header>
  <div class="w3ls-contact">

    <!-- form starts here -->
    <form action="#" method="post">
      <div class="agile-field-txt">
        <div class="mr_agilemain">
          <div class="left-wthree">
            <input type="text" name="s_name" placeholder=" " id="s_name" required>
            <label class="bot_w3">
              姓名</label>
          </div>
          <div class="left-wthree">
            <input type="text" name="s_age" placeholder=" " id="s_age" required>
            <label class="bot_w3">
              年龄</label>
          </div>
           <div class="left-wthree">
            <input type="text" name="s_sex" placeholder=" " id="s_sex" required>
            <label class="bot_w3">
              性别</label>
          </div>
        </div>
      </div>
      <div class="agile-field-txt">
        <label>
          联系电话</label>
        <input type="text" name="s_phone" placeholder=" " id="s_phone" required />
      </div>
      <div class="agile-field-txt">
        <label>
         学校</label>
        <textarea name="s_school" type="text" placeholder="请输入您的学校" id="s_school" required></textarea>
      </div>
      <div class="agile-field-txt">
        <label>
          年级</label>
        <textarea name="s_class" type="text" placeholder="请输入您的年级" id="s_class" required></textarea>
      </div>
      <div class="agile-field-txt">
        <label>
          地址</label>
         <textarea name="s_address" type="text" placeholder="请输入您的地址" id="s_address" required></textarea>
      </div>
      <div class="agile-field-txt">
        <label>
          修改密码</label>
        <textarea name="s_password" type="password" placeholder="请输入您修改的密码" id="s_password" required></textarea>
      </div>
      <div class="w3ls-contact  w3l-sub">
        <input type="button" value="完成" id="update" onclick="Finish()">
      </div>

    </form>
  </div>
  <!-- //form ends here -->
</body>
<!-- //Body -->

</html>